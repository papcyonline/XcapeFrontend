(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[131],{1135:function(e,t,a){Promise.resolve().then(a.bind(a,65764))},65764:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ConversationalLeadAgent}});var s=a(57437),r=a(2265),n=a(66794),o=a(17865);let i=(0,o.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var l=a(11666),d=a(94115);let c=(0,o.Z)("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]);var u=a(99839),g=a(95790),h=a(6454);let p=[{key:"audience",question:"Hi! What type of companies are you looking for?"},{key:"niche",question:"What industry? (e.g., Software, Healthcare, Marketing)"},{key:"keywords",question:"Keywords to search for? (separate with commas)"},{key:"location",question:"Which location? (e.g., San Francisco, CA)"},{key:"requested_count",question:"How many leads? (1-100)"}];function ConversationalLeadAgent(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(""),[y,m]=(0,r.useState)(0),[x,f]=(0,r.useState)({}),[b,v]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[S,C]=(0,r.useState)(null),[D,A]=(0,r.useState)(null),M=(0,r.useRef)(null),Z=(0,r.useRef)(null);(0,r.useEffect)(()=>{0===e.length&&addAgentMessage(p[0].question)},[]),(0,r.useEffect)(()=>{var e;null===(e=M.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]),(0,r.useEffect)(()=>()=>{Z.current&&clearInterval(Z.current)},[]);let addAgentMessage=function(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];a?(N(!0),setTimeout(()=>{t(t=>[...t,{id:Date.now().toString(),role:"agent",content:e,timestamp:new Date}]),N(!1)},1e3)):t(t=>[...t,{id:Date.now().toString(),role:"agent",content:e,timestamp:new Date}])},updateLastAgentMessage=e=>{t(t=>{let a=[...t],s=-1;for(let e=a.length-1;e>=0;e--)if("agent"===a[e].role){s=e;break}return -1!==s&&(a[s]={...a[s],content:e,timestamp:new Date}),a})},addUserMessage=e=>{t(t=>[...t,{id:Date.now().toString(),role:"user",content:e,timestamp:new Date}])},pollGenerationStatus=async e=>{try{let t=await h.fn.getJobStatus(e);switch(C(t),t.status){case"in_progress":let a="\uD83D\uDD04 ".concat(t.message||"Generating leads..."," ").concat(t.progress||0,"% complete");updateLastAgentMessage(a);break;case"completed":Z.current&&clearInterval(Z.current),v(!1),k(!0),updateLastAgentMessage("\uD83C\uDF89 Success! I've generated ".concat(t.leads_count||"your"," leads. You can now view them in your leads dashboard. Would you like to generate more leads?"));break;case"failed":Z.current&&clearInterval(Z.current),v(!1),updateLastAgentMessage("❌ Sorry, lead generation failed: ".concat(t.error_message||"Unknown error",". Please try again."))}}catch(e){console.error("Error polling status:",e)}},startStatusPolling=e=>{Z.current=setInterval(()=>{pollGenerationStatus(e)},2e3),pollGenerationStatus(e)},handleSubmit=async e=>{if(e.preventDefault(),!a.trim())return;addUserMessage(a);let t=a.trim();o("");let s=p[y].key,r=t;"keywords"===s?r=t.split(",").map(e=>e.trim()).filter(e=>e):"requested_count"===s&&(r=parseInt(t)||10);let n={...x,[s]:r};f(n),y<p.length-1?setTimeout(()=>{addAgentMessage(p[y+1].question),m(y+1)},1500):setTimeout(()=>{showSummary(n)},1500)},showSummary=e=>{var t;let a="Ready to generate:\n• ".concat(e.audience,"\n• Industry: ").concat(e.niche,"\n• Keywords: ").concat(null===(t=e.keywords)||void 0===t?void 0:t.join(", "),"\n• Location: ").concat(e.location,"\n• Count: ").concat(e.requested_count,"\n\nType 'yes' to start or 'no' to restart.");addAgentMessage(a),m(-1)},handleConfirmation=async e=>{if(e.toLowerCase().includes("yes")){addUserMessage(e),v(!0),C(null);try{addAgentMessage("\uD83D\uDE80 Starting lead generation process...",!1);let e={audience:x.audience||"",categories:x.categories||[],keywords:x.keywords||[],niche:x.niche||"",location:x.location||"",requested_count:x.requested_count||10},t=await h.fn.generateJob(e);t.job_id?(A(t.job_id),startStatusPolling(t.job_id)):(k(!0),v(!1),updateLastAgentMessage("\uD83C\uDF89 Success! I've generated your leads. You can now view them in your leads dashboard. Would you like to generate more leads?"))}catch(e){var t,a;v(!1),addAgentMessage("❌ Sorry, I encountered an error: ".concat((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||e.message||"Failed to generate leads",". Please try again."),!1)}}else e.toLowerCase().includes("no")&&(addUserMessage(e),resetConversation())},resetConversation=()=>{Z.current&&clearInterval(Z.current),t([]),m(0),f({}),k(!1),v(!1),C(null),A(null),setTimeout(()=>{addAgentMessage(p[0].question)},500)};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto h-[600px] bg-white dark:bg-gray-800 rounded-xl shadow-lg flex flex-col",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(c,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Lead Generation Assistant"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"AI-powered lead discovery"})]}),b&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{if(!S)return(0,s.jsx)(n.Z,{className:"w-4 h-4 animate-spin"});switch(S.status){case"pending":return(0,s.jsx)(i,{className:"w-4 h-4 text-yellow-500"});case"in_progress":return(0,s.jsx)(n.Z,{className:"w-4 h-4 animate-spin text-blue-500"});case"completed":return(0,s.jsx)(l.Z,{className:"w-4 h-4 text-green-500"});case"failed":return(0,s.jsx)(d.Z,{className:"w-4 h-4 text-red-500"});default:return(0,s.jsx)(n.Z,{className:"w-4 h-4 animate-spin"})}})(),(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:(null==S?void 0:S.status)==="in_progress"?"".concat(S.progress||0,"%"):"Processing..."})]})]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map(e=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-[80%] rounded-lg p-3 ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white"),children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:["agent"===e.role&&(0,s.jsx)(c,{className:"w-4 h-4 mt-1 text-blue-600"}),"user"===e.role&&(0,s.jsx)(u.Z,{className:"w-4 h-4 mt-1"}),(0,s.jsx)("div",{className:"whitespace-pre-line",children:e.content})]})})},e.id)),j&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c,{className:"w-4 h-4 text-blue-600"}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),(0,s.jsx)("div",{ref:M})]}),b&&(null==S?void 0:S.status)==="in_progress"&&(0,s.jsxs)("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-800",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-blue-700 dark:text-blue-300 mb-1",children:[(0,s.jsx)("span",{children:"Generating leads..."}),(0,s.jsxs)("span",{children:[S.progress||0,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(S.progress||0,"%")}})})]}),w&&(0,s.jsx)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border-t border-green-200 dark:border-green-800",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-300",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Lead generation completed successfully!"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/leads",className:"ml-auto bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"View Leads"})]})}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(-1===y?(handleConfirmation(a),o("")):w?(a.toLowerCase().includes("yes")?(addUserMessage(a),resetConversation()):(addUserMessage(a),addAgentMessage("Thanks for using the lead generation assistant! Feel free to start a new conversation anytime.")),o("")):handleSubmit(e))},className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:b?"Generating leads...":"Type your response...",disabled:b||j,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white disabled:opacity-50"}),(0,s.jsx)("button",{type:"submit",disabled:b||j||!a.trim(),className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?(0,s.jsx)(n.Z,{className:"w-5 h-5 animate-spin"}):(0,s.jsx)(g.Z,{className:"w-5 h-5"})})]})})]})}},6454:function(e,t,a){"use strict";a.d(t,{BG:function(){return o},Yu:function(){return l},fn:function(){return i},iJ:function(){return n}});var s=a(54829);let r=s.Z.create({baseURL:"http://192.168.1.231:9876",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),r.interceptors.response.use(e=>e,e=>{var t,a,s;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=null===(s=e.config)||void 0===s?void 0:null===(a=s.url)||void 0===a?void 0:a.includes("/api/auth/");t||(localStorage.removeItem("token"),window.location.href="/login")}return Promise.reject(e)});let n={login:e=>r.post("/api/auth/login",e).then(e=>e.data),register:e=>r.post("/api/auth/register",e).then(e=>e.data),logout:()=>r.post("/api/auth/logout").then(e=>e.data),getProfile:()=>r.get("/api/users/profile").then(e=>e.data),updateProfile:e=>r.put("/api/users/profile",e).then(e=>e.data),forgotPassword:e=>r.post("/api/auth/forgot-password",{email:e}).then(e=>e.data),resetPassword:e=>r.post("/api/auth/reset-password",e).then(e=>e.data)},o={getProfile:()=>r.get("/api/users/profile").then(e=>e.data),updateProfile:e=>r.put("/api/users/profile",e).then(e=>e.data),getStats:()=>r.get("/api/users/stats").then(e=>e.data)},i={generateJob:e=>r.post("/api/leads/generate-job",e).then(e=>e.data),getJobStatus:e=>r.get("/api/leads/job/".concat(e,"/status")).then(e=>e.data),getUserJobs:()=>r.get("/api/leads/jobs").then(e=>e.data),generate:e=>r.post("/api/leads/generate",e).then(e=>e.data),getGenerationStatus:e=>r.get("/api/leads/status/".concat(e)).then(e=>e.data),getAll:e=>r.get("/api/leads",{params:e}).then(e=>e.data),getById:e=>r.get("/api/leads/".concat(e)).then(e=>e.data),update:(e,t)=>r.put("/api/leads/".concat(e),t).then(e=>e.data),delete:e=>r.delete("/api/leads/".concat(e)).then(e=>e.data),getTags:()=>r.get("/api/tags").then(e=>e.data),createTag:e=>r.post("/api/tags",e).then(e=>e.data),updateTag:(e,t)=>r.put("/api/tags/".concat(e),t).then(e=>e.data),deleteTag:e=>r.delete("/api/tags/".concat(e)).then(e=>e.data),tagLead:(e,t)=>r.post("/api/tags/".concat(t,"/leads/").concat(e)).then(e=>e.data),untagLead:(e,t)=>r.delete("/api/tags/".concat(t,"/leads/").concat(e)).then(e=>e.data)},l={getOverview:()=>r.get("/api/analytics/overview").then(e=>e.data),getStatusDistribution:()=>r.get("/api/analytics/status-distribution").then(e=>e.data),getSourceBreakdown:()=>r.get("/api/analytics/source-breakdown").then(e=>e.data),getIndustryBreakdown:()=>r.get("/api/analytics/industry-breakdown").then(e=>e.data),getDailyStats:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return r.get("/api/analytics/daily-stats",{params:{days:e}}).then(e=>e.data)},getGeographicDistribution:()=>r.get("/api/analytics/geographic-distribution").then(e=>e.data),getScoreDistribution:()=>r.get("/api/analytics/score-distribution").then(e=>e.data),getRecentActivity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return r.get("/api/analytics/recent-activity",{params:{limit:e}}).then(e=>e.data)}}},17865:function(e,t,a){"use strict";a.d(t,{Z:function(){return createLucideIcon$1}});var s=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var createLucideIcon$1=(e,t)=>{let a=(0,s.forwardRef)(({color:a="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,children:l,...d},c)=>(0,s.createElement)("svg",{ref:c,...r,width:n,height:n,stroke:a,strokeWidth:i?24*Number(o)/Number(n):o,className:`lucide lucide-${toKebabCase(e)}`,...d},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...(Array.isArray(l)?l:[l])||[]]));return a.displayName=`${e}`,a}},94115:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(17865);let r=(0,s.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},11666:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(17865);let r=(0,s.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},66794:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(17865);let r=(0,s.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},95790:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(17865);let r=(0,s.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},99839:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(17865);let r=(0,s.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[737,971,472,744],function(){return e(e.s=1135)}),_N_E=e.O()}]);