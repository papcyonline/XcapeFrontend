(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{39678:function(e,t,a){Promise.resolve().then(a.bind(a,11580))},11580:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return DashboardPage}});var s=a(57437),r=a(2265),d=a(61396),i=a.n(d),l=a(92785),n=a(6454);function DashboardPage(){var e;let{user:t,setUser:a}=(0,l.t)(),[d,o]=(0,r.useState)(null),[c,g]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{loadDashboardData()},[]);let loadDashboardData=async()=>{var e,s,r;g(!0),h(null);try{let[s,r,d,i,l]=await Promise.allSettled([n.Yu.getOverview(),n.Yu.getStatusDistribution(),n.Yu.getIndustryBreakdown(),n.Yu.getRecentActivity(5),n.BG.getProfile()]),c={overview:"fulfilled"===s.status?s.value.data:{},userStats:"fulfilled"===r.status?r.value.data:{},allLeads:[],recentLeads:"fulfilled"===i.status?i.value.data:[]};"fulfilled"===l.status&&(null===(e=l.value)||void 0===e?void 0:e.data)&&a({...t,...l.value.data}),o(c)}catch(e){h((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||e.message||"Failed to load dashboard")}finally{g(!1)}};if(c)return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(e=>(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},e))})]});if(u)return(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-red-800 font-medium",children:"Dashboard Error"}),(0,s.jsx)("p",{className:"text-red-600 text-sm",children:u}),(0,s.jsx)("button",{onClick:loadDashboardData,className:"mt-2 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Retry"})]})});let x=(null==d?void 0:d.overview)||{},m=(null==d?void 0:d.userStats)||{},b=x.total_leads||0,p=x.leads_this_month||0,y=x.conversion_rate||0,f=x.avg_lead_score||0,v=(null==t?void 0:t.leads_quota)||100,j=(null==t?void 0:t.leads_used)||(null===(e=x.quota_usage)||void 0===e?void 0:e.used)||0,N=j/v*100,k=N>=80,w=N>=100;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Dashboard"}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:["Welcome back, ",(null==t?void 0:t.full_name)||"User","! Here's what's happening with your leads."]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i(),{href:"/generate",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors inline-flex items-center",children:"⚡ Generate Leads"}),(0,s.jsx)("button",{onClick:loadDashboardData,className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"\uD83D\uDD04 Refresh"})]})]}),t&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:["Current Plan: ",(0,s.jsx)("span",{className:"capitalize",children:t.subscription_plan||"free"})]}),(0,s.jsxs)("p",{className:"text-blue-700 dark:text-blue-200 text-sm",children:["You've used ",j," of ",v," leads this month"]})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(i(),{href:"/pricing",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"enterprise"===t.subscription_plan?"Manage Plan":"Upgrade Plan"})})]})}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Leads"}),(0,s.jsx)("span",{className:"text-gray-400",children:"\uD83D\uDC65"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:b}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["+",p," this month"]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Conversion Rate"}),(0,s.jsx)("span",{className:"text-gray-400",children:"\uD83D\uDCC8"})]}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:[y,"%"]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Based on lead statuses"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Quota Usage"}),(0,s.jsx)("span",{className:"text-gray-400",children:"\uD83C\uDFAF"})]}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:[Math.round(N),"%"]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(w?"bg-red-600":k?"bg-yellow-500":"bg-blue-600"),style:{width:"".concat(Math.min(N,100),"%")}})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,s.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[j," / ",v," leads used"]}),k&&(0,s.jsx)(i(),{href:"/pricing",className:"text-xs text-blue-600 hover:text-blue-500 font-medium",children:w?"Upgrade Now":"Upgrade"})]}),w&&(0,s.jsx)("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-xs text-red-700 dark:text-red-400",children:"⚠️ Quota exceeded! Upgrade to generate more leads."})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Avg Lead Score"}),(0,s.jsx)("span",{className:"text-gray-400",children:"⭐"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:f}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Out of 100 points"})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Lead Status Breakdown"}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-5",children:[{status:"Not Contacted",key:"not_contacted",color:"bg-gray-500"},{status:"Contacted",key:"contacted",color:"bg-blue-500"},{status:"Qualified",key:"qualified",color:"bg-yellow-500"},{status:"Unqualified",key:"unqualified",color:"bg-red-500"},{status:"Converted",key:"converted",color:"bg-green-500"}].map(e=>{let{status:t,key:a,color:r}=e,d=m[a]||0,i=Object.values(m).reduce((e,t)=>e+(t||0),0);return(0,s.jsxs)("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsx)("div",{className:"w-4 h-4 ".concat(r," rounded-full mx-auto mb-2")}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:t}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:[i>0?Math.round(d/i*100):0,"%"]})]},a)})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)(i(),{href:"/generate",className:"flex flex-col items-center p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsx)("span",{className:"text-2xl mb-2",children:"⚡"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Generate New Leads"})]}),(0,s.jsxs)(i(),{href:"/campaigns",className:"flex flex-col items-center p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsx)("span",{className:"text-2xl mb-2",children:"\uD83D\uDCE7"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Create Campaign"})]}),(0,s.jsxs)(i(),{href:"/import-export",className:"flex flex-col items-center p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsx)("span",{className:"text-2xl mb-2",children:"\uD83D\uDCE5"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Import Leads"})]})]})]}),d&&d.recentLeads&&d.recentLeads.length>0&&(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Leads"}),(0,s.jsx)(i(),{href:"/leads",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"View All →"})]}),(0,s.jsx)("div",{className:"space-y-3",children:d.recentLeads.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.company_name||"No company"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-300",children:[(0,s.jsxs)("span",{children:["Status: ",e.status||"not_contacted"]}),(0,s.jsxs)("span",{children:["Source: ",e.source]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.timestamp?new Date(e.timestamp).toLocaleDateString():"No date"})})]},e.lead_id))})]})]})}},6454:function(e,t,a){"use strict";a.d(t,{BG:function(){return i},Yu:function(){return n},fn:function(){return l},iJ:function(){return d}});var s=a(54829);let r=s.Z.create({baseURL:"https://xcape.onrender.com",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),r.interceptors.response.use(e=>e,e=>{var t,a,s;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=null===(s=e.config)||void 0===s?void 0:null===(a=s.url)||void 0===a?void 0:a.includes("/api/auth/");t||(localStorage.removeItem("token"),window.location.href="/login")}return Promise.reject(e)});let d={login:e=>r.post("/api/auth/login",e).then(e=>e.data),register:e=>r.post("/api/auth/register",e).then(e=>e.data),logout:()=>r.post("/api/auth/logout").then(e=>e.data),getProfile:()=>r.get("/api/users/profile").then(e=>e.data),updateProfile:e=>r.put("/api/users/profile",e).then(e=>e.data),forgotPassword:e=>r.post("/api/auth/forgot-password",{email:e}).then(e=>e.data),resetPassword:e=>r.post("/api/auth/reset-password",e).then(e=>e.data)},i={getProfile:()=>r.get("/api/users/profile").then(e=>e.data),updateProfile:e=>r.put("/api/users/profile",e).then(e=>e.data),getStats:()=>r.get("/api/users/stats").then(e=>e.data)},l={generateJob:e=>r.post("/api/leads/generate-job",e).then(e=>e.data),getJobStatus:e=>r.get("/api/leads/job/".concat(e,"/status")).then(e=>e.data),getUserJobs:()=>r.get("/api/leads/jobs").then(e=>e.data),generate:e=>r.post("/api/leads/generate",e).then(e=>e.data),getGenerationStatus:e=>r.get("/api/leads/status/".concat(e)).then(e=>e.data),getAll:e=>r.get("/api/leads",{params:e}).then(e=>e.data),getById:e=>r.get("/api/leads/".concat(e)).then(e=>e.data),update:(e,t)=>r.put("/api/leads/".concat(e),t).then(e=>e.data),delete:e=>r.delete("/api/leads/".concat(e)).then(e=>e.data),getTags:()=>r.get("/api/tags").then(e=>e.data),createTag:e=>r.post("/api/tags",e).then(e=>e.data),updateTag:(e,t)=>r.put("/api/tags/".concat(e),t).then(e=>e.data),deleteTag:e=>r.delete("/api/tags/".concat(e)).then(e=>e.data),tagLead:(e,t)=>r.post("/api/tags/".concat(t,"/leads/").concat(e)).then(e=>e.data),untagLead:(e,t)=>r.delete("/api/tags/".concat(t,"/leads/").concat(e)).then(e=>e.data)},n={getOverview:()=>r.get("/api/analytics/overview").then(e=>e.data),getStatusDistribution:()=>r.get("/api/analytics/status-distribution").then(e=>e.data),getSourceBreakdown:()=>r.get("/api/analytics/source-breakdown").then(e=>e.data),getIndustryBreakdown:()=>r.get("/api/analytics/industry-breakdown").then(e=>e.data),getDailyStats:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return r.get("/api/analytics/daily-stats",{params:{days:e}}).then(e=>e.data)},getGeographicDistribution:()=>r.get("/api/analytics/geographic-distribution").then(e=>e.data),getScoreDistribution:()=>r.get("/api/analytics/score-distribution").then(e=>e.data),getRecentActivity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return r.get("/api/analytics/recent-activity",{params:{limit:e}}).then(e=>e.data)}}},92785:function(e,t,a){"use strict";a.d(t,{t:function(){return i}});var s=a(94660),r=a(74810),d=a(6454);let i=(0,s.Ue)()((0,r.tJ)((e,t)=>({user:null,token:null,isLoading:!1,isAuthenticated:!1,initialize:()=>{let a=t();a.token&&a.user?(localStorage.setItem("token",a.token),e({isAuthenticated:!0,isLoading:!1})):(localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1,isLoading:!1}))},login:async t=>{e({isLoading:!0});try{let a=await d.iJ.login(t);localStorage.setItem("token",a.token),e({user:a.user,token:a.token,isAuthenticated:!0,isLoading:!1})}catch(t){throw e({isLoading:!1}),t}},register:async t=>{e({isLoading:!0});try{await d.iJ.register(t),e({isLoading:!1})}catch(t){throw e({isLoading:!1}),t}},logout:async()=>{try{await d.iJ.logout()}catch(e){}finally{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1,isLoading:!1})}},setUser:t=>{e({user:t,isAuthenticated:!0})},setLoading:t=>{e({isLoading:t})}}),{name:"auth-store",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>e=>{e&&e.initialize()}}))}},function(e){e.O(0,[737,396,166,971,472,744],function(){return e(e.s=39678)}),_N_E=e.O()}]);