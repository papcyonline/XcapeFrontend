(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{44864:function(e,t,a){Promise.resolve().then(a.bind(a,45320))},45320:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ResetPasswordPage}});var s=a(57437),r=a(2265),n=a(24033),o=a(61865),d=a(38110),i=a(92160),l=a(11666),c=a(81184),u=a(61023),g=a(66794),p=a(61396),h=a.n(p),m=a(6454);let x=i.Ry({password:i.Z_().min(6,"Password must be at least 6 characters"),confirmPassword:i.Z_().min(6,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function ResetPasswordPage(){let[e,t]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),[p,w]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1),[b,k]=(0,r.useState)(null),v=(0,n.useRouter)();(0,n.useSearchParams)();let{register:j,handleSubmit:N,formState:{errors:P},setError:S}=(0,o.cI)({resolver:(0,d.F)(x)});(0,r.useEffect)(()=>{let e=window.location.hash.substring(1),t=new URLSearchParams(e),a=t.get("access_token"),s=t.get("refresh_token");console.log("\uD83D\uDD11 Reset password tokens:",{hasAccess:!!a,hasRefresh:!!s}),a&&s?k({access_token:a,refresh_token:s}):S("root",{message:"Invalid reset link. Please request a new password reset email."})},[S]);let onSubmit=async e=>{if(!b){S("root",{message:"Invalid reset link. Please request a new password reset email."});return}w(!0);try{console.log("\uD83D\uDD10 Resetting password..."),await m.iJ.resetPassword({password:e.password,access_token:b.access_token,refresh_token:b.refresh_token}),console.log("✅ Password reset successful"),y(!0),setTimeout(()=>{v.push("/login?message=password_updated")},3e3)}catch(e){var t,a;console.error("❌ Password reset failed:",e),S("root",{message:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||e.message||"Failed to reset password. Please try again."})}finally{w(!1)}};return f?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,s.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:(0,s.jsx)(l.Z,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Password Updated!"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Your password has been successfully updated. You can now sign in with your new password."}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Redirecting to sign in page..."})]})})})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,s.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Reset Your Password"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Enter your new password below."})]}),(0,s.jsxs)("form",{onSubmit:N(onSubmit),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:"password",type:e?"text":"password",...j("password"),className:"w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white ".concat(P.password?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter your new password"}),(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3",onClick:()=>t(!e),children:e?(0,s.jsx)(c.Z,{className:"h-4 w-4 text-gray-400"}):(0,s.jsx)(u.Z,{className:"h-4 w-4 text-gray-400"})})]}),P.password&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P.password.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:"confirmPassword",type:a?"text":"password",...j("confirmPassword"),className:"w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white ".concat(P.confirmPassword?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Confirm your new password"}),(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3",onClick:()=>i(!a),children:a?(0,s.jsx)(c.Z,{className:"h-4 w-4 text-gray-400"}):(0,s.jsx)(u.Z,{className:"h-4 w-4 text-gray-400"})})]}),P.confirmPassword&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P.confirmPassword.message})]}),P.root&&(0,s.jsx)("div",{className:"rounded-md bg-red-50 dark:bg-red-900/10 p-3",children:(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:P.root.message})}),(0,s.jsxs)("button",{type:"submit",disabled:p||!b,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:[p&&(0,s.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Updating Password...":"Update Password"]})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)(h(),{href:"/login",className:"text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Back to sign in"})})]})})})}},6454:function(e,t,a){"use strict";a.d(t,{BG:function(){return o},Yu:function(){return i},fn:function(){return d},iJ:function(){return n}});var s=a(54829);let r=s.Z.create({baseURL:"https://xcape.onrender.com",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),r.interceptors.response.use(e=>e,e=>{var t,a,s;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=null===(s=e.config)||void 0===s?void 0:null===(a=s.url)||void 0===a?void 0:a.includes("/api/auth/");t||(localStorage.removeItem("token"),window.location.href="/login")}return Promise.reject(e)});let n={login:e=>r.post("/api/auth/login",e).then(e=>e.data),register:e=>r.post("/api/auth/register",e).then(e=>e.data),logout:()=>r.post("/api/auth/logout").then(e=>e.data),getProfile:()=>r.get("/api/users/profile").then(e=>e.data),updateProfile:e=>r.put("/api/users/profile",e).then(e=>e.data),forgotPassword:e=>r.post("/api/auth/forgot-password",{email:e}).then(e=>e.data),resetPassword:e=>r.post("/api/auth/reset-password",e).then(e=>e.data)},o={getProfile:()=>r.get("/api/users/profile").then(e=>e.data),updateProfile:e=>r.put("/api/users/profile",e).then(e=>e.data),getStats:()=>r.get("/api/users/stats").then(e=>e.data)},d={generateJob:e=>r.post("/api/leads/generate-job",e).then(e=>e.data),getJobStatus:e=>r.get("/api/leads/job/".concat(e,"/status")).then(e=>e.data),getUserJobs:()=>r.get("/api/leads/jobs").then(e=>e.data),generate:e=>r.post("/api/leads/generate",e).then(e=>e.data),getGenerationStatus:e=>r.get("/api/leads/status/".concat(e)).then(e=>e.data),getAll:e=>r.get("/api/leads",{params:e}).then(e=>e.data),getById:e=>r.get("/api/leads/".concat(e)).then(e=>e.data),update:(e,t)=>r.put("/api/leads/".concat(e),t).then(e=>e.data),delete:e=>r.delete("/api/leads/".concat(e)).then(e=>e.data),getTags:()=>r.get("/api/tags").then(e=>e.data),createTag:e=>r.post("/api/tags",e).then(e=>e.data),updateTag:(e,t)=>r.put("/api/tags/".concat(e),t).then(e=>e.data),deleteTag:e=>r.delete("/api/tags/".concat(e)).then(e=>e.data),tagLead:(e,t)=>r.post("/api/tags/".concat(t,"/leads/").concat(e)).then(e=>e.data),untagLead:(e,t)=>r.delete("/api/tags/".concat(t,"/leads/").concat(e)).then(e=>e.data)},i={getOverview:()=>r.get("/api/analytics/overview").then(e=>e.data),getStatusDistribution:()=>r.get("/api/analytics/status-distribution").then(e=>e.data),getSourceBreakdown:()=>r.get("/api/analytics/source-breakdown").then(e=>e.data),getIndustryBreakdown:()=>r.get("/api/analytics/industry-breakdown").then(e=>e.data),getDailyStats:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return r.get("/api/analytics/daily-stats",{params:{days:e}}).then(e=>e.data)},getGeographicDistribution:()=>r.get("/api/analytics/geographic-distribution").then(e=>e.data),getScoreDistribution:()=>r.get("/api/analytics/score-distribution").then(e=>e.data),getRecentActivity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return r.get("/api/analytics/recent-activity",{params:{limit:e}}).then(e=>e.data)}}},11666:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(17865);let r=(0,s.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},81184:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(17865);let r=(0,s.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},61023:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(17865);let r=(0,s.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},function(e){e.O(0,[737,396,536,971,472,744],function(){return e(e.s=44864)}),_N_E=e.O()}]);